<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Pulpería Doña Reyna</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Cinzel:wght@600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            --midnight: #0f172a;
            --gold: #d4af37;
            --gold-gradient: linear-gradient(135deg, #d4af37 0%, #f1d27b 100%);
            --transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* --- BASE --- */
        html, body { overflow-x: hidden; font-family: 'Plus Jakarta Sans', sans-serif; }

        /* --- NAVBAR DINÁMICA --- */
        .navigation-clean { padding: 25px 0; transition: var(--transition); background: transparent; position: fixed; width: 100%; top: 0; z-index: 1050; }
        .navigation-clean.scrolled, .navigation-admin { background: var(--midnight) !important; padding: 12px 0; border-bottom: 2px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .nav-link-custom { color: white !important; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; padding: 10px 18px !important; text-decoration: none; transition: 0.3s; }
        .nav-link-custom:hover, .text-gold { color: var(--gold) !important; }
        .dropdown-menu { background: #1e293b; border: 1px solid var(--gold); border-radius: 12px; }
        .dropdown-item { color: rgba(255,255,255,0.8); transition: 0.3s; }
        .dropdown-item:hover { background: var(--gold); color: var(--midnight); font-weight: bold; }

        /* --- HERO (INDEX) --- */
        .hero-master { height: 100vh; min-height: 600px; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .hero-visual-filter { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(15,23,42,0.85), rgba(15, 23, 42, 0.6)); z-index: 2; }
        .hero-bg-media img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; }
        .hero-content { position: relative; z-index: 3; text-align: center; color: white; width: 100%; padding: 0 15px; }
        .text-gradient-gold { background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .btn-gold-action { background: var(--gold-gradient); color: var(--midnight); padding: 16px 40px; border-radius: 50px; font-weight: 700; text-decoration: none; display: inline-block; transition: 0.3s; }
        .btn-gold-action:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(212,175,55,0.3); color: var(--midnight); }

        /* --- SECCIONES --- */
        .py-10 { padding: 6rem 0; }
        .bg-gold { background-color: var(--gold) !important; }
        .cinzel { font-family: 'Cinzel', serif; }
        .ls-2 { letter-spacing: 2px; }
        .service-card-premium { background: white; border-radius: 24px; transition: var(--transition); border: 1px solid #f1f5f9; }
        .service-card-premium:hover { transform: translateY(-10px); }
        .text-shadow-dark { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); }
        
        /* Testimonios */
        .testimonial-card { text-align: center; padding: 3rem; max-width: 800px; margin: 0 auto; }
        .profile-img { width: 90px; height: 90px; border-radius: 50%; border: 3px solid var(--gold); margin-bottom: 1.5rem; object-fit: cover; }
        .testimonial-text { font-size: 1.25rem; font-style: italic; color: #475569; }

        /* WhatsApp y Footer */
        .whatsapp-float { position: fixed; width: 60px; height: 60px; bottom: 40px; right: 40px; background-color: #25d366; color: white; border-radius: 50px; display: flex; align-items: center; justify-content: center; font-size: 30px; z-index: 1000; transition: 0.3s; text-decoration: none; }
        .whatsapp-float:hover { transform: scale(1.1); color: white; }
        .footer-dark { background: #070b14; color: white; }
        .border-gold-swal { border: 2px solid #d4af37 !important; border-radius: 15px !important; }
        
        /* Footer Marca Personal */
        .shekinah-link-container { text-decoration: none !important; transition: var(--transition); padding: 5px 10px; }
        .footer-brand-img { height: 25px; filter: brightness(0) invert(1); opacity: 0.8; transition: var(--transition); }
        .shekinah-brand { font-size: 0.85rem; letter-spacing: 1px; color: rgba(255, 255, 255, 0.5); }
        .shekinah-link-container:hover { transform: translateY(-2px); }
        .shekinah-link-container:hover .footer-brand-img { opacity: 1; filter: drop-shadow(0 0 5px var(--gold)); }
        .shekinah-link-container:hover .shekinah-brand { color: white !important; }
    </style>
</head>
<body class="bg-white">
    <nav class="navbar navbar-expand-lg @(User.Identity!.IsAuthenticated ? "navigation-admin sticky-top" : "navigation-clean")">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="/">
                <img src="~/img/site/Logo.png" alt="Logo" style="height: 50px; filter: brightness(0) invert(1);" />
            </a>
            <button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#navRes">
                <i class="bi bi-list fs-1 text-gold"></i>
            </button>
            <div class="collapse navbar-collapse" id="navRes">
                <ul class="navbar-nav ms-auto align-items-center">
                    @if (User.Identity != null && User.Identity.IsAuthenticated)
                    {
                        @await Component.InvokeAsync("MenuDinamico")
                        <li class="nav-item ms-lg-3">
                            <form id="logoutForm" asp-controller="Account" asp-action="Logout" method="post">
                                <button type="button" id="btnSalir" class="btn btn-dark border-gold text-gold rounded-pill px-4 btn-sm fw-bold shadow-sm"> SALIR </button>
                            </form>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item"><a class="nav-link-custom" href="/#nosotros">Legado</a></li>
                        <li class="nav-item"><a class="nav-link-custom" href="/#servicios">Servicios</a></li>
                        <li class="nav-item"><a class="nav-link-custom" href="/#testimonios">Opiniones</a></li>
                        <li class="nav-item"><a class="nav-link-custom" href="/#contacto">Contacto</a></li>
                        <li class="nav-item ms-lg-2">
                            <a asp-controller="Account" asp-action="Login" class="btn btn-dark rounded-pill px-4 text-gold fw-bold shadow-sm border-0"> ACCESO PRIVADO </a>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </nav>

    <main role="main">@RenderBody()</main>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        AOS.init({ duration: 1000, once: true });

        // Navbar Scroll
        window.addEventListener('scroll', function () {
            const nav = document.querySelector('.navigation-clean');
            if (nav) {
                if (window.scrollY > 50) nav.classList.add('scrolled');
                else nav.classList.remove('scrolled');
            }
        });

        // Modal Carga
        $(document).on('click', '.nav-link-custom, .dropdown-item', function (e) {
            const href = $(this).attr('href');
            if (href && href !== '#' && !href.startsWith('#')) {
                Swal.fire({ title: 'Procesando...', html: 'Sincronizando con el servidor', allowOutsideClick: false, showConfirmButton: false, didOpen: () => { Swal.showLoading(); } });
            }
        });

        // Logout
        $('#btnSalir').on('click', function () {
            Swal.fire({
                title: '¿Cerrar Sesión?',
                text: "Estás a punto de salir del sistema.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: '<i class="bi bi-door-open-fill"></i> Sí, salir',
                cancelButtonText: 'Cancelar',
                buttonsStyling: false,
                customClass: { confirmButton: 'btn btn-dark border-gold text-gold rounded-pill px-4 mx-2', cancelButton: 'btn btn-danger rounded-pill px-4 mx-2', popup: 'border-gold-swal' }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({ title: 'Cerrando sesión...', allowOutsideClick: false, showConfirmButton: false, didOpen: () => { Swal.showLoading(); } });
                    $('#logoutForm').submit();
                }
            });
        });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>